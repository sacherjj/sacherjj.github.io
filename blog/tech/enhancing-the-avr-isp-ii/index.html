<!DOCTYPE html>
<html lang="en" itemscope="itemscope" itemtype="http://schema.org/BlogPost">
<head>
    <meta charset="utf-8">
    <title>Enhancing the AVR ISP II: joesacher.com</title>
    <meta itemprop="image" content="http://www.joesacher.com/images/favicon-128x128.png">
    <link rel="shortcut icon" href="http://www.joesacher.com/favicon.ico">
    <link rel="apple-touch-icon-precomposed" href="http://www.joesacher.com/images/apple-touch-icon.png">

    <meta name="description" itemprop="description" content="The AVR ISP II is a device to program an AVR microcontroller using a 6 pin header in a circuit. It does not contain any capability to power the circuit being programmed. This could be very handy. Dave Jones at the EEVBlog has a video about adding power to the ISP cable, using an LM317 to provide both 5V and 3.3V. The issue with this, as he stated, was that the 5V source was very close to the required ..." />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="copyright" content="Copyright (c) 1998-2015 Joe Sacher" />
    <meta name="author" content="Joe Sacher" />


    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]> <script src="http://www.joesacher.com/theme/js/html5.js"></script> <![endif]-->
    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" media="all" href="http://www.joesacher.com/theme/css/main.css">
    <link rel="stylesheet" media="all" href="http://www.joesacher.com/theme/css/final-%(versions)s.css">
    <link rel="stylesheet" media="all" href="http://www.joesacher.com/theme/css/pygments-monokai.css">
    <link rel="stylesheet" media="all" href="http://www.joesacher.com/theme/css/fontello.css">
    <link href='http://fonts.googleapis.com/css?family=Bitter:400,400italic|Droid+Serif:400' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Gabriela&amp;text=%26%C2%A7|PT+Mono' rel='stylesheet' type='text/css'>
    <meta property="twitter:account_id" content="22582024" />
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://www.joesacher.com/images/favicon-128x128.png">
    <meta name="twitter:site" content="@sacherjj">
    <meta name="twitter:title" content="Enhancing the AVR ISP II">
    <meta name="twitter:description" content="The AVR ISP II is a device to program an AVR microcontroller using a 6 pin header in a circuit. It does not contain any capability to power the circuit being programmed. This could be very handy. Dave Jones at the EEVBlog has a video about adding power to the ISP cable, using an LM317 to provide both 5V and 3.3V. The issue with this, as he stated, was that the 5V source was very close to the required ...">
    <meta name="twitter:creator" content="@sacherjj">
    <meta name="twitter:domain" content="www.joesacher.com">
    <meta property="og:image" content="http://www.joesacher.com/images/favicon-128x128.png"/>
    <meta property="og:site_name" content="joesacher.com"/>
    <meta property="og:title" content="Enhancing the AVR ISP II"/>
    <meta property="og:type" content="article"/>
    <meta property="og:description" content="The AVR ISP II is a device to program an AVR microcontroller using a 6 pin header in a circuit. It does not contain any capability to power the circuit being programmed. This could be very handy. Dave Jones at the EEVBlog has a video about adding power to the ISP cable, using an LM317 to provide both 5V and 3.3V. The issue with this, as he stated, was that the 5V source was very close to the required ..."/>
    <meta property="og:url" content="http://www.joesacher.com/blog/tech/enhancing-the-avr-isp-ii/"/>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3718160-3', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>
    <header class="blog-header hidden-print">
        <div class="container">
            <div class="row-fluid">
                <div class="span8"><a href="http://www.joesacher.com" class="brand">joesacher.com</a></div>
                <div class="span4" id="blog-nav">
                    <ul class="nav nav-pills pull-right">
                        <li >
                        <a href="http://www.joesacher.com/category/cooking.html ">cooking</a>
                        <li >
                        <a href="http://www.joesacher.com/category/how-to.html ">how-to</a>
                        <li >
                        <a href="http://www.joesacher.com/category/personal.html ">personal</a>
                        <li >
                        <a href="http://www.joesacher.com/category/reviews.html ">reviews</a>
                        <li  class="active" >
                        <a href="http://www.joesacher.com/category/tech.html ">tech</a>
                        <li >
                        <a href="http://www.joesacher.com/category/trans-am.html ">trans-am</a>
                    </ul>
                </div>
            </div>         </div>     </header>

    <div class="container">
        <div class="content">
            <div class="row-fluid">
                <div class="span11">
<article class="article">
    <div class="row-fluid">
        <div class="content-title span11">
            <h1 itemprop="name headline">Enhancing the <span class="caps">AVR</span> <span class="caps">ISP</span> <span class="caps">II</span></h1>
        </div>
    </div>

    <div class="row-fluid">
        <aside class="article-sidebar span3">
<div class="row-fluid">
    <div class="span10">
        <p>
            <span itemprop="datePublished" class="hidden">2011-05-23T00:00:00-04:00</span>
            <span title="2011-05-23T00:00:00-04:00">Mon 23<span class="day_suffix">rd</span> May, 2011</span><!-- <br /> by
            <span class="post-author vcard">
                <span class="fn" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
                    <span itemprop="name">Joe Sacher</span>
                </span>
            </span> -->
        </p>
        <p title="814 words"><i class="muted icon-clock"></i>4 min read</p>
        <span itemprop="timeRequired" class="hidden">P4M</span>
        <span itemprop="wordCount" class="hidden">814</span>

        <p>Category: <a href="http://www.joesacher.com/category/tech.html">tech</a></p>
    </div>

    <div class="span10">
        <p class="tag_heading">Tags:</p>
        <ul class="tag-list">
            <li class="tag"><i class="icon-tags muted"></i><a href="http://www.joesacher.com/tag/avr.html">avr</a></li>
            <li class="tag"><i class="icon-tags muted"></i><a href="http://www.joesacher.com/tag/electronics.html">electronics</a></li>
            <li class="tag"><i class="icon-tags muted"></i><a href="http://www.joesacher.com/tag/hacking.html">hacking</a></li>
        </ul>
    </div>

        <div class="span10 social_widgets">
            <br />
<a href="https://twitter.com/share" class="twitter-share-button" data-via="sacherjj" data-hashtags="electronics,avr,hacking" data-url="http://www.joesacher.com/blog/tech/enhancing-the-avr-isp-ii/" data-text="Enhancing the AVR ISP II: joesacher.com">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>
</div>        </aside>

        <section class="content span9" itemprop="text articleBody">

            <p>The <span class="caps">AVR</span> <span class="caps">ISP</span> <span class="caps">II</span> is a device to program an <span class="caps">AVR</span> microcontroller using a 6 pin header in a circuit.  It does not contain any capability to power the circuit being programmed.  This could be very handy.</p>
<p>Dave Jones at the <a class="reference external" href="http://eevblog.com">EEVBlog</a> has a <a class="reference external" href="http://www.eevblog.com/2011/03/25/eevblog-158-avr-isp-mk2-lm317-regulator-tutorial">video about adding power to the <span class="caps">ISP</span> cable, using an <span class="caps">LM317</span></a> to provide both 5V and 3.3V.  The issue with this, as he stated, was that the 5V source was very close to the required dropout voltage of the regulator to get the 3.3V.  In addition, resistors are needed to set the voltage.  This is my version of hacking on the <span class="caps">AVR</span> <span class="caps">ISP</span> <span class="caps">II</span>.</p>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/Regulator.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">3.3V <span class="caps">LDO</span> Regulator soldered to <span class="caps">USB</span> jack</p>
</div>
<p>I decided to use a Low Drop Out regulator for 3.3V.  The specific part I used was the <a class="reference external" href="http://www.rohm.com/products/databook/power/pdf/bdxxka5-e.pdf"><span class="caps">BD33KA5</span> in a <span class="caps">TO252</span>-3 package (pdf)</a>.  I started by soldering the tab of the <span class="caps">LDO</span> 3.3V regulator to the shield ground on the <span class="caps">USB</span> jack.  My new $50 Atten 858D+ hot air rework station made this much easier than an iron.  I had tried and failed with the iron before the 858D+ arrived.  According to the data sheet, I needed a 1uF on both Vcc and 3.3V output pins.  I used some tantalums that I had around.</p>
<div class="figure align-right" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/Vcc.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Connection from the 5V pin of the <span class="caps">USB</span> to the 3.3V voltage regulator</p>
</div>
<p>I soldered the Vcc side of the regulator directly to the <span class="caps">USB</span> 5V pin and also soldered a 5V wire from the regulator back to the switch.</p>
<p>I decided that I would use a <span class="caps">DPDT</span> <span class="caps">ON</span>-<span class="caps">OFF</span>-<span class="caps">ON</span> switch to allow for 5V - 0V - 3.3V output options.  I used a double pole, instead of a single pole, so I could use the other pole of the switch to power little LEDs beside the 5V and 3.3V labels.  This will give an indication to make it harder to accidentally power into a live circuit.  I decided to mess with surface mount LEDs.  This would turn out to be a mistake.</p>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/SMDTest.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Powering both the <span class="caps">SMD</span> <span class="caps">LED</span> indicators</p>
</div>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/Snapped2.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption"><span class="caps">SMD</span> LEDs were too delecate for me</p>
</div>
<p>When I got the <a class="reference external" href="http://search.digikey.com/scripts/DkSearch/dksus.dll?Detail&amp;name=475-1408-1-ND">LEDs from DigiKey</a>, they were tiny.  Like, stick to your soldering iron when trying to solder tiny.  Like, Joe you are going to snap them in half a couple times.  I soldered the <span class="caps">LED</span> to a 1/4W resistor and a wire.  This allowed me to test the power.  For 2mA, these were pretty decent.  I snapped one <span class="caps">LED</span> during this, but resoldered on another one.</p>
<p>After messing around with soldering those to the switch and trying to bend the resistors into place, I snapped both of them.  I think it might have been possible with thin wire and would have looked good.  But I was done with this <span class="caps">SMD</span> stuff for now. :)</p>
<div class="figure align-right" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/BetterLEDs.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Change to 3mm LEDs</p>
</div>
<p>I grabbed some 3mm red LEDs that I have had since I was in middle school.  These let me also fix the one problem I didn’t think about.  My <span class="caps">SMD</span> LEDs were crossed, so the light would be illuminated the opposite direction of the switch toggle.  I crossed the hookup for the 3mm LEDs.  I had to change the current limiting resistors from 1.5k to 220.  I figured about 16 mA for these LEDs and it turned out about right.  (I am running the LEDs directly from the 5V power.)</p>
<p>With 5V and 3.3V soldered to each side of one pole, I wired the center down to pin 2 of the <span class="caps">ISP</span> header.  Now we can power it with 5V, 3.3V or Nothing.</p>
<div class="figure align-right" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/Pin2.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption"><span class="caps">ISP</span> Power connection on Pin 2</p>
</div>
<p>I connected the <span class="caps">AVR</span> <span class="caps">ISP</span> <span class="caps">II</span> to the <span class="caps">ISP</span> connector on an Arduino Uno board.  With no power, the <span class="caps">ISP</span> should work as normal, if you power the Uno board.</p>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/PowerOff.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Connected to Uno but with power off</p>
</div>
<p>I then tried the 5V power to the Uno board and that looked good.</p>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/On5V.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Powering the <span class="caps">UNO</span> with 5V <span class="caps">ISP</span> connection</p>
</div>
<p>Finally I thought the Uno might run on 3.3V, even though I don’t think you are supposed to use up to 16 MHz with 3.3V.  I didn’t try programming, but the power definitely works.</p>
<div class="figure" style="width: 450px; height: auto; max-width: 100%;">
<img alt="" src="/images/posts/enhancing-the-avr-isp-ii/On33V.jpg" style="width: 450px; height: auto; max-width: 100%;"/>
<p class="caption">Powering the Uno with 3.3V <span class="caps">ISP</span></p>
</div>
<p>I’m not terribly pleased with the results of hot gluing the LEDs.  It spreads the light too much.  If I was to do it again, I wouldn’t try to cover around the <span class="caps">LED</span>, I would have put a dab of hot glue and stuck the <span class="caps">LED</span> into the glue.  I did find out that the 858D+ rework air iron was again helpful to fix my glue mess.  By setting the temperature down to the minimum of 100 C, I was able to remelt the glue and push the LEDs in deeper with a flat screw driver, without hurting the plastic case at all.</p>
<p>Anyhow, it is a test device, so it doesn’t have to look good.  It just has to work.  Work it does.</p>


            <hr />

            <div class="row-fluid">
                <div class="realted_posts span11">
                    <h3>Related Posts</h3>
                        <nav>
                            <dl>
                                <dt><h4><a href="http://www.joesacher.com/blog/tech/micro-domino-part-2/">Micro Domino - Part&nbsp;2</a></h4></dt>
                                <dd><span class="smallprint muted"></span></dd>
                                <dt><h4><a href="http://www.joesacher.com/blog/tech/micro-domino-part-1/">Micro Domino - Part&nbsp;1</a></h4></dt>
                                <dd><span class="smallprint muted"></span></dd>
                                <dt><h4><a href="http://www.joesacher.com/blog/tech/im-such-a-ham/">I&#8217;m such a <span class="caps">HAM</span>&#8230;</a></h4></dt>
                                <dd><span class="smallprint muted"></span></dd>
                                <dt><h4><a href="http://www.joesacher.com/blog/tech/amateur-extra-class-no-more-tests/">Amateur Extra Class - No More&nbsp;Tests</a></h4></dt>
                                <dd><span class="smallprint muted"></span></dd>
                            </dl>
                        </nav>
                </div>
            </div>
            <hr />

            <!--
            <div class="row-fluid">
                <h3 id="article-comments-section">Comments</h3>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'joesachercom'; 

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
            -->
        </section>
    </div>

</article>
                </div>
            </div>         </div>     </div>

    <!--footer-->
    <footer class="blog-footer hidden-print">
        <div class="container">
            <div class="row-fluid">

                <div class="site-nav span2">
                    <h4 class="nav-header">Site</h4>
                    <ul class="nav nav-list" id="site-links">
                        <li><a href="http://www.joesacher.com"><i class="icon-home"></i>Home</a></li>
                        <li><a href="http://www.joesacher.com/blog/"><i class="icon-list"></i>Archives</a></li>
                        <li><a href="http://www.joesacher.com/tags.html"><i class="icon-tags"></i>Tags</a></li>
                    </ul>
                </div>

                <div class="social span2" id="socialist">
                    <h4 class="nav-header">LINKS</h4>
                    <ul class="nav nav-list">
                        <li><a href="http://www.linkedin.com/in/joesacher/" rel="author"><i class="icon-linkedin-squared"></i>LinkedIn</a></li>
                        <li><a href="http://stackoverflow.com/users/93191/joe" rel="author"><i class="icon-stackoverflow"></i>Stack&#8203;Overflow</a></li>

                    </ul>
                </div>

                <div class="links span2">
                    <h4 class="nav-header">&nbsp;</h4>
                    <ul class="nav nav-list">
                        <li><a href="http://twitter.com/sacherjj" rel="author"><i class="icon-twitter"></i>Twitter</a></li>
                        <li><a href="http://github.com/sacherjj" rel="author"><i class="icon-github-circled"></i>GitHub</a></li>
                    </ul>
                </div>

<div class="colophon span5" id="colophon">
  <h4 class="nav-header">About</h4>
  <p>I'm a Electrical Engineer by degree, Software Engineer by experience, and someone who loves to learn new things. I have a quick wit that it is often too corny. I'm good at thinking outside of the box, because I often don't realize one exists.</p>
</div>

            </div> <!--end of fluid row-->
            <hr />
            <p>
                <small>
                    &copy; 1998-2015 <a href="http://www.joesacher.com">Joe Sacher</a><br />
                </small>
            </p>
        </div> <!--end of blog-footer-->
    </footer> <!--end of container -->

    <!--/footer-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

</body>
</html>